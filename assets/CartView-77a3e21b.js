import{_ as C,R as x,M,r as I,o as l,c as n,a as t,b as h,w as b,F as m,g as y,e as p,t as a,d as D}from"./index-8201d654.js";import{S as v}from"./sweetalert2.all-f808f091.js";const{VITE_URL:f,VITE_PATH:g}={VITE_PATH:"ssozr",VITE_URL:"https://vue3-course-api.hexschool.io/",BASE_URL:"/vueweek82/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},N={data(){return{cartData:[],dalModal:"",dataModal:"",dataModalJudge:!1,delData:{},delId:"",disabled:!1,productData:{}}},components:{RouterLink:x},methods:{getCartData(){this.$http.get(`${f}/v2/api/${g}/cart`).then(s=>{this.cartData=s.data.data}).catch(s=>{alert(s.data.message).error(s)})},openDelModal(s){this.deldata={},this.delModal.show(),this.delId=s.id,this.delData=s.product,console.log(this.delData)},openDelAllModal(){this.delData={},this.delId="",this.delData.title="全部商品",this.delModal.show()},openDataModal(s){this.dataModalJudge=!0,this.productData={...s},this.delId=s.id,this.dataModal.show()},delCart(){this.delId?this.$http.delete(`${f}/v2/api/${g}/cart/${this.delId}`).then(s=>{this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),this.dataModal.hide(),v.fire(`${s.data.message}`)}).catch(s=>{alert(s.data.message).error(s)}):this.$http.delete(`${f}/v2/api/${g}/carts`).then(s=>{this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),v.fire(`${s.data.message}`)}).catch(s=>{alert(s.data.message).error(s)})},changeQty(s,i){this.disabled=!0;const w={product_id:i,qty:s};this.$http.put(`${f}/v2/api/${g}/cart/${i}`,{data:w}).then(r=>{v.fire(`${r.data.message}`),this.disabled=!1,this.getCartData(),this.dataModal.hide()}).catch(r=>{alert(r.data.message).error(r)})},formatNumber(s){if(s)return s.toLocaleString()}},mounted(){this.getCartData(),this.delModal=new M(this.$refs.delModal),this.dataModal=new M(this.$refs.dataModal)}},V={class:"container p-0"},R={class:"row"},T={key:0,class:"text-center my-30"},B=t("div",{class:"d-flex justify-content-center"},[t("h2",{class:"mb-10 border-bottom border-3 border-primary"},"尚未收錄課程")],-1),E={key:1,class:"table-wrapper d-lg-block d-none"},L={class:"table align-middle"},S={class:"text-center"},j=t("th",null,"課程名稱",-1),q=t("th",null,"授課老師",-1),A=t("th",null,"總課程數",-1),O=t("th",null,"購買數量",-1),J=t("th",null,"價格",-1),P={class:"fs-5"},Q={class:"dropdown"},U=["disabled"],F={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},H=["onClick"],z=["onClick"],G={class:"text-center"},K=t("td",null,null,-1),W=t("td",null,null,-1),X=t("td",null,null,-1),Y=t("td",null,null,-1),Z={class:"align-bottom"},$={class:"border-bottom border-primary border-3 mb-0"},tt={class:"ms-1"},st=t("button",{type:"button",class:"btn btn-primary fs-3"},"結帳",-1),et={key:2,class:"row d-lg-none my-15"},ot={class:""},at={class:"fs-5"},dt={class:"d-flex align-items-center justify-content-between"},lt=["onClick"],nt={class:"d-flex justify-content-between"},it={class:"border-bottom border-primary border-3 mb-0 fs-4"},rt={class:"ms-1"},ct=t("button",{type:"button",class:"btn btn-primary fs-5"},"結帳",-1),_t=t("div",null,null,-1),ut={class:"modal",tabindex:"-1",ref:"delModal"},ht={class:"modal-dialog"},bt={class:"modal-content"},pt={class:"modal-header"},mt={key:0,class:"modal-title"},yt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ft=t("div",{class:"modal-body"},[t("p",null,"確定移出此課程?")],-1),gt={class:"modal-footer"},Dt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1),vt={class:"modal",tabindex:"-1",ref:"dataModal"},wt={class:"modal-dialog"},Mt={key:0,class:"modal-content"},kt={class:"modal-header"},Ct={class:"modal-title"},xt={class:"border-bottom border-3 border-primary"},It=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Nt={class:"modal-body"},Vt={class:"p-0"},Rt={class:"mb-3"},Tt={class:"d-flex align-items-center justify-content-between"},Bt={class:"d-flex align-items-center justify-content-between"},Et={class:"dropdown"},Lt=["disabled"],St={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},jt=["onClick"],qt={class:"modal-footer"},At=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function Ot(s,i,w,r,e,d){const c=I("RouterLink");return l(),n("div",V,[t("div",R,[e.cartData.total===0?(l(),n("div",T,[B,h(c,{to:"teachers",class:"btn btn-primary"},{default:b(()=>[p("立即前往課程列表")]),_:1})])):(l(),n("div",E,[t("table",L,[t("thead",null,[t("tr",S,[j,q,A,O,J,t("th",null,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:i[0]||(i[0]=o=>d.openDelAllModal())},"清空購物車")])])]),t("tbody",null,[(l(!0),n(m,null,y(e.cartData.carts,(o,_)=>(l(),n("tr",{key:_,class:"text-center"},[t("td",null,[h(c,{to:`/class/${o.product.id}`},{default:b(()=>[t("h2",P,a(o.product.title),1)]),_:2},1032,["to"])]),t("td",null,a(o.product.unit),1),t("td",null,a(o.product.origin_price*o.qty)+"堂",1),t("td",null,[t("div",Q,[t("button",{disabled:e.disabled,class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},a(o.qty),9,U),t("ul",F,[(l(),n(m,null,y(20,(u,k)=>t("li",{key:k},[t("a",{onClick:Jt=>d.changeQty(u,o.id),class:"dropdown-item"},a(u),9,H)])),64))])])]),t("td",null,a(d.formatNumber(o.total)),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:u=>d.openDelModal(o)},"刪除",8,z)])]))),128)),t("tr",G,[K,W,X,Y,t("td",Z,[t("h2",$,[p("總金額:NT "),t("span",tt,a(d.formatNumber(e.cartData.total)),1)])]),t("td",null,[h(c,{to:"/Order"},{default:b(()=>[st]),_:1})])])])])])),e.cartData.total!==0?(l(),n("div",et,[(l(!0),n(m,null,y(e.cartData.carts,(o,_)=>(l(),n("ul",{key:_,class:"border-bottom pb-3 border-primary"},[t("li",ot,[h(c,{to:`/class/${o.product.id}`},{default:b(()=>[t("h2",at,a(o.product.title),1)]),_:2},1032,["to"]),t("div",dt,[t("div",null,"課程總價格:"+a(d.formatNumber(o.total)),1),t("button",{type:"button",class:"btn btn-primary",onClick:u=>d.openDataModal(o)},"詳細資料",8,lt)])])]))),128)),t("div",nt,[t("h2",it,[p(" 總金額:NT "),t("span",rt,a(d.formatNumber(e.cartData.total)),1)]),h(c,{to:"/Order"},{default:b(()=>[ct]),_:1})])])):D("",!0),_t]),t("div",ut,[t("div",ht,[t("div",bt,[t("div",pt,[e.delData.title?(l(),n("h5",mt,a(e.delData.title),1)):D("",!0),yt]),ft,t("div",gt,[Dt,t("button",{type:"button",class:"btn btn-primary",onClick:i[1]||(i[1]=o=>d.delCart(e.delData.id))},"確認移出")])])])],512),t("div",vt,[t("div",wt,[e.dataModalJudge?(l(),n("div",Mt,[t("div",kt,[t("h5",Ct,[p("課程名稱: "),t("span",xt,a(e.productData.product.title),1)]),It]),t("div",Nt,[t("ul",Vt,[t("li",Rt,[t("div",Tt,[t("div",null,"總堂數:"+a(e.productData.product.origin_price*e.productData.qty)+"堂",1),t("div",null,"授課老師: "+a(e.productData.product.unit),1)])]),t("li",Bt,[t("div",null,"課程總價格:"+a(d.formatNumber(e.productData.total)),1),t("div",Et,[p(" 購買次數: "),t("button",{disabled:e.disabled,class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},a(e.productData.qty),9,Lt),t("ul",St,[(l(),n(m,null,y(20,(o,_)=>t("li",{key:_},[t("a",{onClick:u=>d.changeQty(o,e.productData.id),class:"dropdown-item"},a(o),9,jt)])),64))])])])])]),t("div",qt,[At,t("button",{type:"button",class:"btn btn-primary",onClick:i[2]||(i[2]=o=>d.delCart(e.productData))},"確認移出")])])):D("",!0)])],512)])}const Ut=C(N,[["render",Ot]]);export{Ut as default};
