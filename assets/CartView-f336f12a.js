import{c as M}from"./cart-7f9f4e6c.js";import{_ as x,R as I,m as N,M as V,r as R,o as d,c as l,b as t,d as h,w as u,F as b,h as p,g as m,t as o,e as w}from"./index-18b53ae6.js";import{S as k}from"./sweetalert2.all-ad810f41.js";const{VITE_URL:y,VITE_PATH:f}={VITE_PATH:"ssozr",VITE_URL:"https://vue3-course-api.hexschool.io/",BASE_URL:"/vueweek82/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},T={data(){return{cartData:[],dalModal:"",delData:{},delId:"",disabled:!1,productData:{}}},components:{RouterLink:I},methods:{getCartData(){this.$http.get(`${y}/v2/api/${f}/cart`).then(e=>{this.cartData=e.data.data}).catch(e=>{alert(e.data.message).error(e)})},openDelModal(e){this.deldata={},this.delModal.show(),this.delId=e.id,this.delData=e.product},openDelAllModal(){this.delData={},this.delId="",this.delData.title="全部商品",this.delModal.show()},delCart(){this.delId?this.$http.delete(`${y}/v2/api/${f}/cart/${this.delId}`).then(e=>{this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),k.fire(`${e.data.message}`),this.getCartDataPinia()}).catch(e=>{alert(e.data.message).error(e)}):this.$http.delete(`${y}/v2/api/${f}/carts`).then(()=>{this.delData={},this.delId="",this.delModal.hide(),this.getCartData(),this.getCartDataPinia()}).catch(e=>{alert(e.data.message).error(e)})},changeQty(e,r){this.disabled=!0;const v={product_id:r,qty:e};this.$http.put(`${y}/v2/api/${f}/cart/${r}`,{data:v}).then(c=>{k.fire(`${c.data.message}`),this.disabled=!1,this.getCartData()}).catch(c=>{alert(c.data.message).error(c)})},formatNumber(e){if(e)return e.toLocaleString()},...N(M,["getCartDataPinia"])},mounted(){this.getCartData(),this.delModal=new V(this.$refs.delModal)}},$={class:"container","data-aos":"fade-right"},B={class:"row justify-content-center"},E={key:0,class:"text-center my-30"},L=t("div",{class:"d-flex justify-content-center"},[t("h2",{class:"mb-10 border-bottom border-3 border-primary"},"尚未收錄課程")],-1),S={key:1,class:"table-wrapper d-lg-block d-none"},A={class:"table align-middle"},P={class:"text-center"},j=t("th",null,"課程名稱",-1),q=t("th",null,"授課老師",-1),O=t("th",null,"總課程數",-1),Q=t("th",null,"購買數量",-1),U=t("th",null,"價格",-1),F={class:"fs-5"},H={class:"dropdown"},z=["disabled"],G={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},J=["onClick"],K=["onClick"],W={class:"text-center"},X=t("td",null,null,-1),Y=t("td",null,null,-1),Z=t("td",null,null,-1),tt=t("td",null,null,-1),et={class:"align-bottom"},st={class:"border-bottom border-primary border-3 mb-0 fs-6"},ot={class:"ms-1"},at=t("button",{type:"button",class:"btn btn-primary"},"結帳",-1),dt={key:2,class:"row d-lg-none my-15"},lt={class:""},nt={class:"d-flex justify-content-between align-items-center mb-3"},rt={class:"fs-5"},it=["onClick"],ct={class:"d-flex align-items-center justify-content-between"},_t={class:"dropdown"},ht=["disabled"],ut={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},bt=["onClick"],pt={class:"d-flex justify-content-between"},mt={class:"border-bottom border-primary border-3 mb-0 fs-4"},yt={class:"ms-1"},ft=t("button",{type:"button",class:"btn btn-primary"},"結帳",-1),gt=t("div",null,null,-1),Dt={class:"modal",tabindex:"-1",ref:"delModal"},vt={class:"modal-dialog"},wt={class:"modal-content"},kt={class:"modal-header"},Ct={key:0,class:"modal-title"},Mt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),xt=t("div",{class:"modal-body"},[t("p",null,"確定移出此課程?")],-1),It={class:"modal-footer"},Nt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function Vt(e,r,v,c,a,n){const _=R("RouterLink");return d(),l(b,null,[t("div",$,[t("div",B,[a.cartData.total===0?(d(),l("div",E,[L,h(_,{to:"teachers",class:"btn btn-primary"},{default:u(()=>[m("立即前往課程列表")]),_:1})])):(d(),l("div",S,[t("table",A,[t("thead",null,[t("tr",P,[j,q,O,Q,U,t("th",null,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:r[0]||(r[0]=s=>n.openDelAllModal())},"清空購物車")])])]),t("tbody",null,[(d(!0),l(b,null,p(a.cartData.carts,(s,g)=>(d(),l("tr",{key:g,class:"text-center"},[t("td",null,[h(_,{to:`/class/${s.product.id}`},{default:u(()=>[t("h2",F,o(s.product.title),1)]),_:2},1032,["to"])]),t("td",null,o(s.product.unit),1),t("td",null,o(s.product.origin_price*s.qty)+"堂",1),t("td",null,[t("div",H,[t("button",{disabled:a.disabled,class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},o(s.qty),9,z),t("ul",G,[(d(),l(b,null,p(20,(i,D)=>t("li",{key:D},[t("a",{onClick:C=>n.changeQty(i,s.id),class:"dropdown-item"},o(i),9,J)])),64))])])]),t("td",null,o(n.formatNumber(s.total)),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:i=>n.openDelModal(s)},"刪除",8,K)])]))),128)),t("tr",W,[X,Y,Z,tt,t("td",et,[t("h2",st,[m("總金額:NT "),t("span",ot,o(n.formatNumber(a.cartData.total)),1)])]),t("td",null,[h(_,{to:"/Order"},{default:u(()=>[at]),_:1})])])])])])),a.cartData.total!==0?(d(),l("div",dt,[(d(!0),l(b,null,p(a.cartData.carts,(s,g)=>(d(),l("ul",{key:g,class:"border-bottom pb-3 border-primary"},[t("li",lt,[t("div",nt,[h(_,{to:`/class/${s.product.id}`},{default:u(()=>[t("h2",rt,o(s.product.title),1)]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-primary rounded-pill",onClick:i=>n.openDelModal(s)},"刪除",8,it)]),t("div",ct,[t("div",null,"總堂數:"+o(s.product.origin_price*s.qty)+"堂",1),t("div",_t,[m(" 購買次數: "),t("button",{disabled:a.disabled,class:"btn btn-secondary dropdown-toggle py-0",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},o(s.qty),9,ht),t("ul",ut,[(d(),l(b,null,p(20,(i,D)=>t("li",{key:D},[t("a",{onClick:C=>n.changeQty(i,s.id),class:"dropdown-item"},o(i),9,bt)])),64))])]),t("div",null,"此課程總額: $"+o(n.formatNumber(s.total)),1)])])]))),128)),t("div",pt,[t("h2",mt,[m(" 總金額:NT "),t("span",yt,o(n.formatNumber(a.cartData.total)),1)]),h(_,{to:"/Order"},{default:u(()=>[ft]),_:1})])])):w("",!0),gt])]),t("div",Dt,[t("div",vt,[t("div",wt,[t("div",kt,[a.delData.title?(d(),l("h5",Ct,o(a.delData.title),1)):w("",!0),Mt]),xt,t("div",It,[Nt,t("button",{type:"button",class:"btn btn-primary",onClick:r[1]||(r[1]=s=>n.delCart(a.delData.id))},"確認移出")])])])],512)],64)}const Bt=x(T,[["render",Vt]]);export{Bt as default};
