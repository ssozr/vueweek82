import{c as I}from"./cart-c936cb33.js";import{k as A,l as J,_ as z,S as K,p as Q,R as tt,P as st,A as et,r as S,o as w,i as R,w as P,c as q,h as H,d as F,b as t,t as f,F as V,m as B,M as at,g as C}from"./index-bb585123.js";import"./sweetalert2.all-6b342b55.js";function ot(s){const{effect:a,swiper:e,on:c,setTranslate:r,setTransition:i,overwriteParams:p,perspective:l,recreateShadows:h,getEffectParams:o}=s;c("beforeInit",()=>{if(e.params.effect!==a)return;e.classNames.push(`${e.params.containerModifierClass}${a}`),l&&l()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const m=p?p():{};Object.assign(e.params,m),Object.assign(e.originalParams,m)}),c("setTranslate",()=>{e.params.effect===a&&r()}),c("setTransition",(m,_)=>{e.params.effect===a&&i(_)}),c("transitionEnd",()=>{if(e.params.effect===a&&h){if(!o||!o().slideShadows)return;e.slides.forEach(m=>{m.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(_=>_.remove())}),h()}});let n;c("virtualUpdate",()=>{e.params.effect===a&&(e.slides.length||(n=!0),requestAnimationFrame(()=>{n&&e.slides&&e.slides.length&&(r(),n=!1)}))})}function rt(s,a){const e=A(a);return e!==a&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function L(s,a,e){const c=`swiper-slide-shadow${e?`-${e}`:""}`,r=A(a);let i=r.querySelector(`.${c}`);return i||(i=J("div",`swiper-slide-shadow${e?`-${e}`:""}`),r.append(i)),i}function it({swiper:s,extendParams:a,on:e}){a({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),ot({effect:"coverflow",swiper:s,on:e,setTranslate:()=>{const{width:i,height:p,slides:l,slidesSizesGrid:h}=s,o=s.params.coverflowEffect,n=s.isHorizontal(),m=s.translate,_=n?-m+i/2:-m+p/2,N=n?o.rotate:-o.rotate,G=o.depth;for(let b=0,X=l.length;b<X;b+=1){const u=l[b],$=h[b],Y=u.swiperSlideOffset,O=(_-Y-$/2)/$,d=typeof o.modifier=="function"?o.modifier(O):O*o.modifier;let D=n?N*d:0,x=n?0:N*d,E=-G*Math.abs(d),g=o.stretch;typeof g=="string"&&g.indexOf("%")!==-1&&(g=parseFloat(o.stretch)/100*$);let M=n?0:g*d,k=n?g*d:0,T=1-(1-o.scale)*Math.abs(d);Math.abs(k)<.001&&(k=0),Math.abs(M)<.001&&(M=0),Math.abs(E)<.001&&(E=0),Math.abs(D)<.001&&(D=0),Math.abs(x)<.001&&(x=0),Math.abs(T)<.001&&(T=0);const W=`translate3d(${k}px,${M}px,${E}px)  rotateX(${x}deg) rotateY(${D}deg) scale(${T})`,Z=rt(o,u);if(Z.style.transform=W,u.style.zIndex=-Math.abs(Math.round(d))+1,o.slideShadows){let y=n?u.querySelector(".swiper-slide-shadow-left"):u.querySelector(".swiper-slide-shadow-top"),v=n?u.querySelector(".swiper-slide-shadow-right"):u.querySelector(".swiper-slide-shadow-bottom");y||(y=L(o,u,n?"left":"top")),v||(v=L(o,u,n?"right":"bottom")),y&&(y.style.opacity=d>0?d:0),v&&(v.style.opacity=-d>0?-d:0)}}},setTransition:i=>{s.slides.map(l=>A(l)).forEach(l=>{l.style.transitionDuration=`${i}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${i}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}const lt={props:["otherClassData"],components:{Swiper:K,SwiperSlide:Q,RouterLink:tt},setup(){return{modules:[it,st,et]}},methods:{changPage(s){this.$emit("chang-page",s)}}},nt={class:"card bg-primary border-0 pt-4",style:{height:"481px",width:"300px"}},ct={class:"d-flex justify-content-center"},dt={class:"d-flex justify-content-center align-items-center border rounded-circle border-secondary"},ht=["src"],ft={class:"card-body text-center p-0 mt-5"},pt={class:"card-title fs-4"},mt={class:"mt-8 mb-6"},ut={class:"card-text fs-6"},_t=t("div",{class:"card-footer text-center bg-secondary text-white"}," 詳細介紹 ",-1);function gt(s,a,e,c,r,i){const p=S("RouterLink"),l=S("swiper-slide"),h=S("swiper");return w(),R(h,{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",autoplay:{delay:2e3,disableOnInteraction:!1},coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},pagination:!0,modules:c.modules,class:"mySwiper"},{default:P(()=>[(w(!0),q(V,null,H(e.otherClassData,(o,n)=>(w(),R(l,{key:n,onClick:m=>i.changPage(o.id)},{default:P(()=>[F(p,{to:`/class/${o.id}`},{default:P(()=>[t("div",nt,[t("div",ct,[t("div",dt,[t("img",{src:o.imageUrl,class:"card-img-top rounded-circle card-img p-5",alt:"導師照片"},null,8,ht)])]),t("div",ft,[t("h2",pt,f(o.title),1),t("div",mt,[t("p",ut,f(o.description),1)])]),_t])]),_:2},1032,["to"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["modules"])}const wt=z(lt,[["render",gt]]),{VITE_PATH:U,VITE_URL:j}={VITE_PATH:"ssozr",VITE_URL:"https://vue3-course-api.hexschool.io/",BASE_URL:"/vueweek82/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},bt={data(){return{classData:{},otherClassData:[],id:"",goCart:!1,category:"",addModal:"",qtyNum:1}},components:{SwiperClassVue:wt},methods:{getClassData(){this.$http.get(`${j}/v2/api/${U}/product/${this.id}`).then(s=>{this.classData=s.data.product,this.category=s.data.product.category,this.getOtherClassData()}).catch(()=>{})},getOtherClassData(){this.$http.get(`${j}v2/api/${U}/products/?category=${this.category}`).then(s=>{this.otherClassData=s.data.products,this.filteredItems()}).catch(()=>{})},openAddModal(){this.addModal.show()},hideAddModal(){this.addModal.hide()},...B(I,["addCart"]),...B(I,["changeGoCart"]),formatNumber(s){if(s)return s.toLocaleString()},filteredItems(){let s=[];const a=this.id;this.otherClassData.forEach(function(e){e.id!==a&&s.push(e)}),this.otherClassData=s},changPage(s){console.log(s),this.id=s,this.$router.push(`/class/${s}`),window.scrollTo(0,0),this.getClassData()},qty(s){this.qtyNum=s}},mounted(){const{id:s}=this.$route.params;this.id=s,this.getClassData(),this.addModal=new at(this.$refs.addModal)}},yt={class:"container mb-15 teacher","data-aos":"fade-right"},vt={class:"row"},Ct={class:"text-center p-0 mb-10 col-8 offset-2"},St=["src"],$t={class:"mb-10"},Dt={class:"border-bottom border-primary border-3 pb-3"},xt={class:"fs-6 mt-lg-0 mt-3 ps-lg-5 d-inline-block"},Et={class:"row flex-lg-row-reverse"},Mt={class:"col-lg-4 text-center"},kt=["src"],Tt={class:"mb-6 mb-lg-0"},Pt={class:"col-lg-8 d-flex flex-column justify-content-between"},qt={class:"fs-4 mb-lg-15 mb-8"},Vt={class:"d-lg-flex text-lg-start text-center justify-content-between align-items-end"},At={class:"p-0 m-0"},Nt={class:"fs-4"},Ot={class:"ms-4"},It={class:"fs-4 m-0"},Rt={class:"ms-4"},Bt={class:"d-lg-flex mt-3"},Lt={class:"my-15 my-md-30 container","data-aos":"fade-right"},Ut=t("h2",{class:"border-bottom border-primary border-3 pb-3"},"相關課程",-1),jt={class:"modal",tabindex:"-1",ref:"addModal"},zt={class:"modal-dialog"},Ht={class:"modal-content"},Ft=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"選擇購買數量"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Gt={class:"modal-body"},Xt={class:"dropdown"},Yt={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Wt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Zt=["onClick"],Jt={class:"modal-footer"},Kt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function Qt(s,a,e,c,r,i){const p=S("SwiperClassVue");return w(),q(V,null,[t("div",yt,[t("div",vt,[t("div",Ct,[t("img",{src:r.classData.imagesUrl,class:"imgI",alt:"課程示意圖"},null,8,St)]),t("div",$t,[t("h2",Dt,[C(f(r.classData.title)+" ",1),t("span",xt,f(r.classData.description),1)])]),t("div",Et,[t("div",Mt,[t("img",{src:r.classData.imageUrl,alt:"老師照片",class:"card-img rounded-circle mb-4"},null,8,kt),t("h3",Tt,"授課老師:"+f(r.classData.unit),1)]),t("div",Pt,[t("p",qt,f(r.classData.content),1),t("div",Vt,[t("ul",At,[t("li",null,[t("p",Nt,[C("課程堂數:"),t("span",Ot,f(r.classData.origin_price)+"堂",1)])]),t("li",null,[t("p",It,[C("課程總額:"),t("span",Rt,"NT$"+f(i.formatNumber(r.classData.price)),1)])])]),t("div",Bt,[t("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=l=>i.openAddModal(r.classData))},"加入購物車"),t("button",{type:"button",class:"btn btn-primary ms-6",onClick:a[1]||(a[1]=l=>s.changeGoCart(r.classData,i.qty))},"立即上課")])])])])])]),t("div",Lt,[Ut,F(p,{"other-class-data":r.otherClassData,onChangPage:i.changPage},null,8,["other-class-data","onChangPage"])]),t("div",jt,[t("div",zt,[t("div",Ht,[Ft,t("div",Gt,[t("div",Xt,[C(" 購買數量: "),t("button",Yt,f(r.qtyNum),1),t("ul",Wt,[(w(),q(V,null,H(20,(l,h)=>t("li",{key:h},[t("a",{class:"dropdown-item",onClick:o=>i.qty(l)},f(l),9,Zt)])),64))])])]),t("div",Jt,[Kt,t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=l=>(s.addCart(r.classData,r.qtyNum),i.hideAddModal()))},"加入購物車")])])])],512)],64)}const as=z(bt,[["render",Qt]]);export{as as default};
